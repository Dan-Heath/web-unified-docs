---
page_title: Identify resources
description: >-
  Learn how to implement resource identity in the Terraform plugin framework.
---

# Resource Identity

A resource identity is a data object, determined by the provider, that is stored alongside the resource state to uniquely identify a remote object. A resource identity should have the following properties:
- The resource identity must correspond to at most one remote object per provider, across all instances of that provider.
- Given a resource identity (during `import`), the provider must be able to determine whether the corresponding remote object exists, and if so, return the resource state.
- The identity data for a remote object must not change during its lifecycle from creation to deletion, or until the provider [upgrades](/terraform/plugin/framework/resources/identity-upgrade) the resource identity schema.

### Schema

To define the identity object for a managed resource, a resource identity [schema](/terraform/plugin/framework/handling-data/schemas) is provided that consists of a map of attribute names and associated behaviors.

The resource identity schema is similar to the resource state schema, but with the following differences:
- The identity schema only supports primitive types and list types, which are represented by the following attributes:

| Attribute                                                                          | ElementType                                                                    |
|------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
| [`BoolAttribute`](/terraform/plugin/framework/handling-data/attributes/bool)       | N/A                                                                            |
| [`Float32Attribute`](/terraform/plugin/framework/handling-data/attributes/float32) | N/A                                                                            |
| [`Float64Attribute`](/terraform/plugin/framework/handling-data/attributes/float64) | N/A                                                                            |
| [`Int32Attribute`](/terraform/plugin/framework/handling-data/attributes/int32)     | N/A                                                                            |
| [`Int64Attribute`](/terraform/plugin/framework/handling-data/attributes/int64)     | N/A                                                                            |
| [`NumberAttribute`](/terraform/plugin/framework/handling-data/attributes/number)   | N/A                                                                            |
| [`StringAttribute`](/terraform/plugin/framework/handling-data/attributes/string)   | N/A                                                                            |
| [`ListAttribute`](/terraform/plugin/framework/handling-data/attributes/list)       | [`types.BoolType`](/terraform/plugin/framework/handling-data/types/bool)       |
| [`ListAttribute`](/terraform/plugin/framework/handling-data/attributes/list)       | [`types.Float32Type`](/terraform/plugin/framework/handling-data/types/float32) |
| [`ListAttribute`](/terraform/plugin/framework/handling-data/attributes/list)       | [`types.Float64Type`](/terraform/plugin/framework/handling-data/types/float64) |
| [`ListAttribute`](/terraform/plugin/framework/handling-data/attributes/list)       | [`types.Int32Type`](/terraform/plugin/framework/handling-data/types/int32)     |
| [`ListAttribute`](/terraform/plugin/framework/handling-data/attributes/list)       | [`types.Int64Type`](/terraform/plugin/framework/handling-data/types/int64)     |
| [`ListAttribute`](/terraform/plugin/framework/handling-data/attributes/list)       | [`types.NumberType`](/terraform/plugin/framework/handling-data/types/number)   |
| [`ListAttribute`](/terraform/plugin/framework/handling-data/attributes/list)       | [`types.StringType`](/terraform/plugin/framework/handling-data/types/string)   |

- Unlike the resource state schema, the resource identity schema does not support behaviors such as `Required` and `Computed`. All identity data is set by the provider, so the entire object is treated as `Computed`. Two behaviors are allowed for each identity schema to assist with importing a resource by identity, `RequiredForImport` and `OptionalForImport`.
    - `RequiredForImport` is set to true if an import block would need this information from the practitioner to import the resource.
    - `OptionalForImport` is set to true if an import block does not require this information from the practitioner to import the resource. This can be data that would normally be defaulted from the configured provider running the import.

It is expected that exactly one of `RequiredForImport` or `OptionalForImport` is set to true. Regardless of which option is chosen, the provider can decide exactly what data is stored in the identity during import, similar to `Computed` attributes in resource state.

### Defining Identity

The identity schema can be set in a new `IdentitySchema` method, which implements the `resource.ResourceWithIdentity` interface. Identity data handling is the same as state/config/plan data for [accessing](/terraform/plugin/framework/handling-data/accessing-values) and [writing](/terraform/plugin/framework/handling-data/writing-state).

```go
var _ resource.ResourceWithIdentity = &S3BucketResource{} // new interface

func (r *S3BucketResource) Metadata(_ context.Context, req resource.MetadataRequest, resp *resource.MetadataResponse) {
  resp.TypeName = "aws_s3_bucket" // example implementation of an AWS S3 bucket
}

func (r *S3BucketResource) Schema(_ context.Context, _ resource.SchemaRequest, resp *resource.SchemaResponse) {
  resp.Schema = schema.Schema{
    // .. resource schema for aws_s3_bucket
  }
}

// Struct model for identity data handling
type S3BucketIdentity struct {
  Bucket    types.String `tfsdk:"bucket"`
  AccountID types.String `tfsdk:"account_id"`
  Partition types.String `tfsdk:"partition"`
  Region    types.String `tfsdk:"region"`
}

func (r *S3BucketResource) IdentitySchema(_ context.Context, _ resource.IdentitySchemaRequest, resp *resource.IdentitySchemaResponse) {
  resp.IdentitySchema = identityschema.Schema{
    Attributes: map[string]identityschema.Attribute{
      "bucket": identityschema.StringAttribute{
        RequiredForImport: true, // must be set during import by the practitioner
      },
      "account_id": identityschema.StringAttribute{
        OptionalForImport: true, // can be defaulted by the provider configuration
      },
      "partition": identityschema.StringAttribute{
        OptionalForImport: true, // can be defaulted by the provider configuration
      },
      "region": identityschema.StringAttribute{
        OptionalForImport: true, // can be defaulted by the provider configuration

      },
    },
  }
}
```

## Writing Identity Data

{/* TODO */}

## Reading Identity Data

{/* TODO */}


