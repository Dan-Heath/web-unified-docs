### Audience warning for Kubernetes authentication roles ((#k8-audience-warning))

<!-- BEGIN: Vault:=v1.20.x -->

| Change       | Affected version | Vault edition
| ------------ | ---------------- | -------------
| New behavior | 1.20.0+          | All

<!-- END: Vault:=v1.20.x -->

Vault logs a warning when you create or update a Kubernetes auth role without an
audience.

#### Recommendation

There are cases where configuring audience details can interfere with your
workflow. For example, tokens created using `kubernetes.io/service-account-token`
do not include an aud claim. But we recommend configuring an audience value for
Kubernetes authentication roles whenever possible. Setting explicit audience
details is best practice because it reduces the risk of token misuse by other
services. Vault can use the configured values to validate that the `aud`
(audience) claim in JWT tokens is intended for Vault.

For example:

```shell-session
$ vault write auth/kubernetes/role/demo      \
    bound_service_account_names=myapp        \
    bound_service_account_namespaces=default \
    policies=default                         \
    audience="my_audience"                   \
    ttl=1h
```

You would then authenticate with the command below.

```shell-session
$ vault write auth/kubernetes/login role=demo audience="my_audience" jwt=...
```