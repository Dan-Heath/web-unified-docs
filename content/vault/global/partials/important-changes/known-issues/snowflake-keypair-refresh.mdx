### Failing credential refresh for Snowflake DB secrets engine key pair authentication ((#snowflake-keypair-refresh))

<!-- BEGIN: Vault:=v1.20.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Open     | All           | 1.20.0+          | None

<!-- END: Vault:=v1.20.x -->

<!-- BEGIN: Vault:=v1.19.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Open     | All           | 1.19.0+          | None

<!-- END: Vault:=v1.19.x -->

<!-- BEGIN: Vault:=v1.18.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Open     | Enterprise    | 1.18.0+          | None

<!-- END: Vault:=v1.18.x -->

<!-- BEGIN: Vault:=v1.17.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Open     | Enterprise    | 1.17.0+          | None

<!-- END: Vault:=v1.17.x -->

<!-- BEGIN: Vault:=v1.16.x -->

| Change      | Status   | Vault edition | Affected version | Fixed version
| ----------- | -------- | ------------- | ---------------- | -------------
| Known issue | Open     | Enterprise    | 1.16.0+          | None

<!-- END: Vault:=v1.16.x -->

Users using keypair or username and password authentication with Snowflake
databases may receive errors due to improper credential refreshes and stale
connections in the connection pool. When two or more concurrent operations
occur, Vault tries to reuse an idle connection from the pool and the request
fails due to session timeout in the Snowflake database.

#### Recommendation

Set the `max_connection_lifetime` to a value below `SESSION_IDLE_TIMEOUT_MINS`.