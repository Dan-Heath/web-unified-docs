---
page_title: /audit-configuration API reference for HCP Terraform
description: >-
  Use the HCP Terraform API's organization `/audit-configuration` endpoint to read and configure an organization's audit system configuration.
tfc_only: true
---

[200]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

[201]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201

[404]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

[422]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

[JSON API document]: /terraform/cloud-docs/api-docs#json-api-documents

[JSON API error object]: https://jsonapi.org/format/#error-objects

[HCP Terraform Audit Trails]: /terraform/cloud-docs/api-docs/audit-trails

[HCP Audit Log Streaming]: https://developer.hashicorp.com/hcp/docs/hcp/audit-log

# Audit configuration API reference

-> TODO DO NOT DEPLOY THIS!!

Doggo shibe shoob shoober doggorino shooberino long doggo length boy fluffer what a nice floof smol borking doggo with a long snoot for pats long water shoob, the neighborhood pupper maximum borkdrive waggy wags very hand that feed shibe lotsa pats borking doggo ruff most angery pupper I have ever seen heckin good boys and girls blep smol heckin, ur givin me a spook woofer pats wow such tempt big ol pupper porgo super chub snoot clouds corgo bork.


<!-- BEGIN: TFC:only name:pnp-callout -->
-> **Note:** Audit logging is available in HCP Terraform **Plus** and **Premium** editions. Refer to [HCP Terraform pricing](https://www.hashicorp.com/products/terraform/pricing) for details. The Audit Configuration API is not available for Terraform Enterprise.
<!-- END: TFC:only name:pnp-callout -->

## Show an organization's audit configuration

`GET /organizations/:organization_name/audit-configuration`

|      Parameter       |                        Description                        |
| -------------------- | --------------------------------------------------------- |
| `:organization_name` | The name of the organization audit configuration to show. |

| Status  |                        Response                        |                                Reason                                 |
| ------- | ------------------------------------------------------ | --------------------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "audit-configurations"`) | The request was successful.                                           |
| [404][] | [JSON API error object][]                              | Audit configuration not found or user unauthorized to perform action. |

### Sample Request

```shell
$ curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  https://app.terraform.io/api/v2/organizations/hashicorp/audit-configuration
```

### Sample Response

```json
{
  "data": {
    "id": "org-Hysjx5eUviuKVCJY",
    "type": "audit-configurations",
    "attributes": {
      "audit-trails": {
        "enabled": false
      },
      "hcp-audit-log-streaming": {
        "enabled": true,
        "use-default-organization": true,
        "organization-id": "aba53670-4f68-4f3a-a7ae-682e8d2cefd9"
      },
      "permissions": {
        "can-enable-hcp-audit-log-streaming": true,
        "can-set-hcp-audit-log-streaming-organization-id": false,
        "can-use-default-audit-log-streaming-organization": true
      },
      "timestamps": {
        "audit-trails-enabled-at": "2021-07-12T22:26:56.743Z",
        "audit-trails-disabled-at": "2021-08-24T23:10:03.674Z",
        "audit-trails-last-success": null,
        "audit-trails-last-failure": null,
        "hcp-audit-log-streaming-enabled-at": "2021-08-24T23:10:04.675Z",
        "hcp-audit-log-streaming-disabled-at": null,
        "hcp-audit-log-streaming-last-success": "2024-11-02T07:08:24.953Z",
        "hcp-audit-log-streaming-last-failure": null
      },
      "updated-at": "2021-08-24T23:10:04.675Z"
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "hashicorp",
          "type": "organizations"
        },
        "links": {
          "related": "/api/v2/organizations/hashicorp"
        }
      },
      "hcp-organization": {
        "data": {
          "id": "aba53670-4f68-4f3a-a7ae-682e8d2cefd9",
          "type": "hcp-organizations"
        }
      }
    },
    "links": {
      "self": "/api/v2/organizations/hashicorp/audit-configuration"
    }
  }
}
```

## Update an organization's audit configuration

`PATCH /organizations/:organization_name/audit-configuration`

|      Parameter       |                         Description                         |
| -------------------- | ----------------------------------------------------------- |
| `:organization_name` | The name of the organization audit configuration to update. |

| Status  |                        Response                        |                                  Reason                                   |
| ------- | ------------------------------------------------------ | ------------------------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "audit-configurations"`) | The request was successful.                                               |
| [404][] | [JSON API error object][]                              | Audit configuration was not found or user unauthorized to perform action. |
| [422][] | [JSON API error object][]                              | Malformed request body (missing attributes, wrong types, etc.).           |

### Request Body

This PATCH endpoint requires a JSON object with the following properties as a request payload.

Properties without a default value are required.

|                              Key path                              |  Type   |     Default      |                                                                                 Description                                                                                 |
| ------------------------------------------------------------------ | ------- | ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `data.type`                                                        | string  |                  | Must be `"audit-configurations"`.                                                                                                                                           |
| `data.attributes.audit-trails.enabled`                             | boolean | (previous value) | Whether audit events will be sent to [HCP Terraform Audit Trails]().                                                                                                        |
| `data.attributes.hcp-audit-log-streaming.enabled`                  | boolean | (previous value) | Whether audit events will be sent to [HCP Audit Log Streaming]().                                                                                                           |
| `data.attributes.hcp-audit-log-streaming.use-default-organization` | boolean | (previous value) | Whether to use the default HCP Organization to send audit events for [HCP Audit Log Streaming](). Only one of `organization-id` or `use-default-organization` may be set.   |
| `data.attributes.hcp-audit-log-streaming.organization-id`          | string  | (previous value) | Whether to use the specified HCP Organization to send audit events for [HCP Audit Log Streaming](). Only one of `organization-id` or `use-default-organization` may be set. |

-> **Note:** At least one auditing method (Audit Trails or Audit Log Streaming) must be enabled.

-> **Note:** The `data.attributes.hcp-audit-log-streaming.organization-id` attribute should only used by HCP Terraform as it requires authentication via HCP Cloud for validation.

### Sample Payload (enable audit trails)

```json
{
  "data": {
    "type": "audit-configurations",
    "attributes": {
      "audit-trails": {
        "enabled": true
      },
    }
  }
}
```

### Sample Payload (enable audit log streaming with default organization)

```json
{
  "data": {
    "type": "audit-configurations",
    "attributes": {
      "hcp-audit-log-streaming": {
        "enabled": true,
        "use-default-organization": true
      }
    }
  }
}
```

### Sample Payload (enable audit log streaming with specified HCP organization)

```json
{
  "data": {
    "type": "audit-configurations",
    "attributes": {
      "hcp-audit-log-streaming": {
        "enabled": true,
        "organization-id": "911f8015-3e90-40a4-855a-23c8b1d64f21"
      }
    }
  }
}
```

### Sample Request

```shell
curl \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/vnd.api+json" \
  --request PATCH \
  --data @payload.json \
  https://app.terraform.io/api/v2/organizations/hashicorp/audit-configuration
```

### Sample Response

```json
{
  "data": {
    "id": "org-Hysjx5eUviuKVCJY",
    "type": "audit-configurations",
    "attributes": {
      "audit-trails": {
        "enabled": true
      },
      "hcp-audit-log-streaming": {
        "enabled": true,
        "use-default-organization": true,
        "organization-id": "aba53670-4f68-4f3a-a7ae-682e8d2cefd9"
      },
      "permissions": {
        "can-enable-hcp-audit-log-streaming": true,
        "can-set-hcp-audit-log-streaming-organization-id": false,
        "can-use-default-audit-log-streaming-organization": true
      },
      "timestamps": {
        "audit-trails-enabled-at": "2025-05-14T14:45:07.743Z",
        "audit-trails-disabled-at": "2021-08-24T23:10:03.674Z",
        "audit-trails-last-success": null,
        "audit-trails-last-failure": null,
        "hcp-audit-log-streaming-enabled-at": "2021-08-24T23:10:04.675Z",
        "hcp-audit-log-streaming-disabled-at": null,
        "hcp-audit-log-streaming-last-success": "2024-11-02T07:08:24.953Z",
        "hcp-audit-log-streaming-last-failure": null
      },
      "updated-at": "2025-05-14T14:45:07.743Z"
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "hashicorp",
          "type": "organizations"
        },
        "links": {
          "related": "/api/v2/organizations/hashicorp"
        }
      },
      "hcp-organization": {
        "data": {
          "id": "aba53670-4f68-4f3a-a7ae-682e8d2cefd9",
          "type": "hcp-organizations"
        }
      }
    },
    "links": {
      "self": "/api/v2/organizations/hashicorp/audit-configuration"
    }
  }
}
```

## Send a test audit message

Creates an audit event that should be received by all enabled auditing methods, and returns the unique ID of that event;

`POST /organizations/:organization_name/audit-configuration/test`

|      Parameter       |                        Description                        |
| -------------------- | --------------------------------------------------------- |
| `:organization_name` | The name of the organization audit configuration to test. |

| Status  |         Response          |                                Reason                                 |
| ------- | ------------------------- | --------------------------------------------------------------------- |
| [201][] |                           | The test event was created.                                           |
| [404][] | [JSON API error object][] | Audit configuration not found or user unauthorized to perform action. |

### Sample Request

```shell
$ curl \
  --header "Authorization: Bearer $TOKEN" \
  --request POST \
  https://app.terraform.io/api/v2/organizations/hashicorp/audit-configuration/test
```

### Sample Response

```json
{
  "request-id": "1e026368-4bc5-4610-aa56-45b5b1fde548"
}
```
