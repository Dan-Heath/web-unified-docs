---
page_title: Required providers block reference for Terraform Stacks
description: Use the `required_providers` block to declare which providers your Stack requires and specify their versions and sources.
---

# `required_providers` block reference

Use the `required_providers` block to declare which providers your Stack requires and specify their versions and sources.

## Background

The `required_providers` block declares which providers your Stack configuration requires so that Terraform can install and use them. This block works exactly as it does in traditional Terraform configurations but is essential for Stack configurations because you must list all providers that your Stack uses.

In Stack configurations, you must define the `required_providers` block at the top level of your Stack configuration files. The Terraform Stacks CLI uses this block to download the listed providers and compute provider lock hashes when you run `tfstacks providers lock`.

## Configuration model

The `required_providers` block supports the following arguments:

- [`required_providers`](#required_providers) &nbsp; block
  - [`<PROVIDER_NAME>`](#provider_name) &nbsp; block
    - [`source`](#source) &nbsp; string
    - [`version`](#version) &nbsp; string

## Complete configuration

All available arguments are defined in the following `required_providers` block:

```hcl
required_providers {
  <PROVIDER_NAME> = {
    source  = "<PROVIDER_SOURCE>"
    version = "<VERSION_CONSTRAINT>"
  }
}
```

## Specification

A `required_providers` block supports the following configuration.

### `required_providers`

The `required_providers` block contains one or more provider requirement declarations. Each declaration specifies a provider name and its requirements.

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = "~> 5.7.0"
  }
  random = {
    source  = "hashicorp/random"
    version = "~> 3.5.1"
  }
}
```

### `<PROVIDER_NAME>` {#provider_name}

Each provider declaration uses the provider name as a key and contains a block with the provider's requirements. The provider name is how you reference the provider in your Stack configuration.

The following arguments are supported for each provider:

| Argument | Description | Type | Required? |
| --- | --- | --- | --- |
| `source` | The global source address for the provider. | String | Required |
| `version` | A version constraint specifying which versions of the provider are acceptable. | String | Optional |

### `source`

The `source` argument specifies the global source address for the provider. This tells Terraform where to download the provider from.

```hcl
required_providers {
  aws = {
    source = "hashicorp/aws"
  }
}
```

The source address has the format `[hostname/]namespace/name`:

- **hostname** (optional): The hostname of the provider registry. Defaults to `registry.terraform.io`
- **namespace**: The organizational namespace within the registry
- **name**: The provider name

#### Summary

- Data type: String
- Default: None
- Required: Yes

### `version`

The `version` argument specifies a version constraint that determines which versions of the provider are acceptable. If you omit this argument, Terraform accepts any version of the provider.

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = "~> 5.7.0"
  }
}
```

Version constraints use the same syntax as traditional Terraform configurations. Common constraint operators include:

- `= 1.2.3`: Exactly version 1.2.3
- `>= 1.2.3`: Version 1.2.3 or newer
- `~> 1.2.3`: Any version in the 1.2.x series
- `>= 1.2.0, < 2.0.0`: Version 1.2.0 or newer, but less than 2.0.0

#### Summary

- Data type: String
- Default: None (any version accepted)

## Usage with Terraform Stacks CLI

The `required_providers` block is essential for the Terraform Stacks CLI commands:

- **`tfstacks providers lock`**: Uses this block to determine which providers to download and generate lock file hashes for
- **`tfstacks init`**: Attempts to download the dependencies listed in this block
- **`tfstacks validate`**: Validates that the providers specified are available

You must list all providers that your Stack uses in the `required_providers` block, even if they are only used in child modules sourced by your components.

## Examples

The following examples demonstrate common use cases for `required_providers` blocks.

### Basic provider requirements

In the following example, a Stack requires the AWS and random providers:

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = "~> 5.7.0"
  }
  random = {
    source  = "hashicorp/random"
    version = "~> 3.5.1"
  }
}
```

### Multiple cloud providers

In the following example, a Stack requires providers for multiple cloud platforms:

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = "~> 5.7.0"
  }
  azurerm = {
    source  = "hashicorp/azurerm"
    version = "~> 3.0"
  }
  google = {
    source  = "hashicorp/google"
    version = "~> 4.0"
  }
}
```

### Providers with exact versions

In the following example, specific exact versions are required for sensitive infrastructure:

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = "= 5.7.0"
  }
  kubernetes = {
    source  = "hashicorp/kubernetes"
    version = "= 2.32.0"
  }
}
```

### Third-party providers

In the following example, a Stack uses both HashiCorp and third-party providers:

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = "~> 5.7.0"
  }
  datadog = {
    source  = "DataDog/datadog"
    version = "~> 3.0"
  }
  github = {
    source  = "integrations/github"
    version = "~> 5.0"
  }
}
```

### Version ranges

In the following example, flexible version ranges allow for updates while maintaining compatibility:

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = ">= 5.0.0, < 6.0.0"
  }
  helm = {
    source  = "hashicorp/helm"
    version = ">= 2.0.0"
  }
  tls = {
    source  = "hashicorp/tls"
    version = "~> 4.0"
  }
}
```

### Stack with utility providers

In the following example, a Stack includes both infrastructure and utility providers:

```hcl
required_providers {
  aws = {
    source  = "hashicorp/aws"
    version = "~> 5.7.0"
  }
  random = {
    source  = "hashicorp/random"
    version = "~> 3.5.1"
  }
  tls = {
    source  = "hashicorp/tls"
    version = "~> 4.0"
  }
  cloudinit = {
    source  = "hashicorp/cloudinit"
    version = "~> 2.3"
  }
  time = {
    source  = "hashicorp/time"
    version = "~> 0.9"
  }
}
```
